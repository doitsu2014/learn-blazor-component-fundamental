@page "/"
@using LearningBlazorWeb.Shared

<div class="pageIndex">
    <PizzaList Pizzas="@State.Menu.Pizzas" Selected="@(async (p) => AddToBasket(p))" Title="List of pizzas:" />
    <ShoppingBasket Basket="@Basket" Selected="@(async (pos) => RemoveFromBasket(pos))" Title="Shopping basket:" GetPizzaFromId="@((pos) => State.Menu.GetPizzaFromId(pos))"/>
</div>


@code
{
    private State State { get; } = new State()
        {
            Menu = new Menu()
        {
            Pizzas = new List<Pizza>()
            {
                new Pizza(1, "Pepperoni", 7.99M, Spiciness.Spicy),
                new Pizza(2, "Margarita", 5.99M, Spiciness.None),
                new Pizza(3, "Diabolo", 9.99M, Spiciness.Hot)
            }
        }
        };

    private void AddToBasket(Pizza pizza)
    {
        Console.WriteLine($"Added pizza {pizza.Name}");
        State.Basket.Add(pizza.Id);
    }

    private void RemoveFromBasket(int pos)
    {
        Console.WriteLine($"Removed pizza at position {pos}");
        State.Basket.RemoveAt(pos);
    }

    public bool ShowAlert { get; set; }

    private void ToggleShowAlert()
    {
        ShowAlert = !ShowAlert;
    }
}
